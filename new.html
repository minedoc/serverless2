<!doctype html>
<pre>
minimal sync
  no query
  no live query
  no ui toolkit
  no arrays
  lww-per-field update
  how is it exposed
    unlike indexeddb the ID is not user controlled
    direct use indexeddb vs proxy overwriting {put/set/delete}
    indexes - allow or let user define
    store.subscribe()
    how to migrate tables

data model
  database ~ store ~ row
  id = sha256(update)
  update
    {CreateTable, clock, name}
      indexeddb cannot change databases midway
      reopen database with higher version number
    {Insert, clock, tableId, value}
    {Update, clock, rowId, value}
      last writer wins, updates do not chain
    {Delete, clock, rowId}

lww-per-field
  Age = {age: clock, Value or Map[field, Age]}
    arrays are values (overwritten)
</pre>
<script>
const encoder = new TextEncoder();
const text = 'An obscure body in the S-K System, your majesty. The inhabitants refer to it as the planet Earth.';
const data = encoder.encode(text);

async function foo() {
  for (var i=0; i<10000; i++) {
    const hash = await crypto.subtle.digest('SHA-256', data);
  }
}

async function bar() {
  const start = Date.now();
  await foo();
  console.log('time', Date.now() - start);
}

bar();
</script>
