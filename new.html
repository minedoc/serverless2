<!doctype html>
<script type="module">
import {init} from './init.js';
init();
</script>

<pre>
todo
  P1 - having loading and connectivity state
    first fetch - nobody found
    first fetch - downloading
    offline
    sharing
  P2 - detect conflicts on startup diff
    you receive newer write and they missing your older write
  P4 - batch writes

minimal sync
  no query
    map and filter the Dict yourself
    no indexes
  no realtime query
    re-query to get new values
  no ui
    this is a db
  no schema
    that's a bad idea
  no await
    data stored in memory, indexed db is persistence only
  no concurrency
    use transactions when modifying idb to ensure correctness
  no dag
    changes are self sufficient
    last writer wins
    cannot statically detect conflicting edits
      normal writes form linked list
      conficting writes form tree
  yes encryption - but later
    authenticity - sign
    privacy - encrypt

correctness
  multiple unsynchronized users of idb
  idb changes are not pushed to other users
  local sync with idb
    changes: writes are key hashed thus idempotent
    tables: use indexeddb transaction compare clock and overwrite

data model
  tables of lww rows
  API
    table(table)
    insert(table, value) returns key
    update(table, key, value)
    remove(table, key)

</pre>

<script>


</script>
